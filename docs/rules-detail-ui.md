# 📒 出荷ルール詳細画面の表示情報（原子リストと簡易モック）

## 9. 表示情報の原子リスト（再配置しやすい形）

一覧と同様、ブロックに依存せず情報粒度を 1 項目ずつ列挙。不要と判断した項目は含めない。

| 情報項目 | 内容 / 例 | 出現箇所（参考） | 表示条件・備考 |
| --- | --- | --- | --- |
| ページタイトル | 出荷ルール詳細 | ページヘッダー | 常時 |
| 配送ケース名 | 例: 北海道 | ページヘッダー | 常時 |
| 戻るリンク | 「一覧に戻る」 | ページ上部 or フッター | 常時 |
| グローバルメッセージ | success/critical のテキスト | ページ上部 | 保存/削除などの結果表示 |
| 基本設定: 出荷リードタイム入力 | number（日数、例: 3） | 基本設定セクション | 基本設定を編集するフィールド |
| 基本設定: 未設定メッセージ | 「基本設定がありません。」 | 基本設定セクション | 基本設定が未登録のとき |
| 基本設定: エラーメッセージ | 日数必須/整数など | 基本設定セクション | バリデーション時 |
| 商品別設定: 件数 | 例: 5 件 | 商品別セクションヘッダー | 商品別設定があるとき |
| 商品別設定: 追加ボタン | 「商品別設定を追加」 | 商品別セクションヘッダー | 常時。クリックで行追加 or モーダル |
| 商品別設定: 行の概要 | 商品ピッカーで選んだ複数商品の集合 + 出荷リードタイム（日数入力） | 商品別リスト | 商品別設定があるとき |
| 商品別設定: 商品選択 | Shopify 商品ピッカーで選んだ商品をタグ表示（複数可、ID直入力なし） | 商品別リスト | 新規/編集時 |
| 商品別設定: エラーメッセージ | 商品未選択/日数未入力など | 商品別リスト | バリデーション時 |
| 商品別設定: 削除ボタン | 「削除」 | 各行 | 行単位で削除 |
| 商品別設定: 未設定メッセージ | 「商品別設定がありません。」 | 商品別セクション | 商品別設定なしのとき |

※ 有効/無効の概念は採用しない。最終更新日時は表示しない。商品指定は Shopify の商品ピッカーを用い、ID直接入力はしない（商品グループもピッカー選択の集合として扱う）。

## 10. シンプルモック（原子リストのみで構成）

```
出荷ルール詳細 / 北海道
──────────────────────────────────
[success/critical メッセージがある場合ここに表示]
[一覧に戻る] リンク

◉ 基本設定（全商品）
出荷リードタイム: [ 3 ] 日（入力）

◉ 商品別設定（5 件）
[ 商品別設定を追加 ]
┌─────────────────────────────┐
│ 商品: [🛍️ 商品ピッカーで選んだ商品A, 商品B] │
│ 出荷リードタイム: [ 2 ] 日（入力）           │
│ [削除]                                     │
└─────────────────────────────┘
┌─────────────────────────────┐
│ 商品: [🛍️ 商品C]                           │
│ 出荷リードタイム: [ 4 ] 日（入力）           │
│ [削除]                                     │
└─────────────────────────────┘

（商品別設定がない場合）
商品別設定がありません。
```

## 11. 実装メモ（編集画面としての留意点）

- 基本設定: `targetType === "all"` を1件だけ扱う。未設定なら新規作成、存在すれば上書き。日数は整数入力（min=1）でバリデーション必須。
- 保存ボタンの表示トリガー: Shopify 商品詳細ページ同様、値変更があるまで非表示にし、dirty 状態になったらヘッダーに「保存」ボタンを出す設計を推奨（難しければ常時ヘッダー表示でも可）。
- 商品別設定: `targetType === "product"` は「商品ピッカーで複数選んだ商品一覧 + 出荷日数」のセットとして扱う。商品IDを手入力せず、ピッカーの選択結果（product GID配列）を保存する。
- 商品ピッカー: Shopify の商品ピッカー（App Bridge Resource Picker など）を利用。選択結果は product GID の配列を保持し、UI は商品タイトル等をタグ表示。
- 最終更新日時: 表示しない。必要なら内部だけで保持。
- 状態概念: 有効/無効は使わない。トグルやバッジは非表示。
- エラーハンドリング: 未入力/未選択時のエラーをセクション内でテキスト表示し、送信時はグローバルメッセージも併用可。
- ナビゲーション: 一覧への戻り導線を明示。保存後に一覧へリダイレクトするか、そのまま残るかは要件次第。
