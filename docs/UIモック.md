# 📘 **出荷期限マネージャー UIモック ドキュメント（国際対応版）**

**Version:** 1.1
**対象機能:** 配送ケース（Shipping Rate）単位の出荷ルール管理
**目的:** デザイン仕様の統一、実装チームとの共通理解、画面遷移の整理

---

# **0. ガイドライン**

- UI は **Shopify Polaris** に寄せた構成
- Shopify の **配送ケース（Shipping Rate）を“親要素”** として扱う
- 1 配送ケースに対し
  - **基本設定（全商品）**
  - **商品別ルール（複数）**
    を配置する階層構造

- 国際配送対応を前提
  - Japan / Standard
  - Intl / ePacket
  - Intl / Courier (EU)
    などを全て平等に扱う

---

# **1. 画面一覧**

| 画面名                            | 内容                           |
| --------------------------------- | ------------------------------ |
| 1. 出荷ルール一覧（配送ケース別） | 配送ケースを親カードとして表示 |
| 2. ルール作成モーダル             | 指定配送ケースにルールを追加   |
| 3. 休業日カレンダー               | 単発/毎週休業の設定            |
| 4. エラー一覧                     | エラー内容の確認・再計算       |

---

# **2. 出荷ルール一覧画面（Shipping Rules by Shipping Rate）**

## 2.1 画面コンセプト

配送ケースを“親”として視覚的にまとまりを作り、
その中に複数のルール（基本設定＋商品別）を包含する UI。

「どの配送ケースの設定か分かりづらい」という問題を根本的に解決。

---

## 2.2 UI モック

```
+---------------------------------------------------------------+
|  📦 出荷ルール（配送ケース別）                                 |
+---------------------------------------------------------------+

[ ルールを追加 ]   [ 配送ケースを同期 ]
```

---

### ◆ Japan / Standard（国内通常便）

```
=================================================================
📬 Japan / Standard
-----------------------------------------------------------------
  ◉ 基本設定（全商品）
     出荷日数：2日
     状態：有効
     [ 編集 ]  [ 無効化 ]

  ・商品別ルール
     - 商品：りんごセット（ID:123）
       出荷日数：3日
       状態：有効
       [ 編集 ] [ 無効化 ]

     - 商品：みかん箱（ID:456）
       出荷日数：1日
       状態：無効
       [ 編集 ] [ 有効化 ]

-----------------------------------------------------------------
[ ➕ この配送ケースにルールを追加 ]
=================================================================
```

---

### ◆ Japan / Cool Delivery（冷蔵便）

```
=================================================================
🧊 Japan / Cool Delivery
-----------------------------------------------------------------
  ◉ 基本設定（全商品）
     出荷日数：1日
     状態：有効
     [ 編集 ]

  ・商品別ルール
     - 商品：チーズケーキ
       出荷日数：2日
       状態：有効
       [ 編集 ]

-----------------------------------------------------------------
[ ➕ この配送ケースにルールを追加 ]
=================================================================
```

---

### ◆ Intl / ePacket（海外 小型便）

```
=================================================================
✈️ Intl / ePacket
-----------------------------------------------------------------
  ◉ 基本設定（全商品）
     出荷日数：7日
     状態：有効
     [ 編集 ]

  ・商品別ルール
     - 商品：T-shirt
       出荷日数：10日
       状態：有効
       [ 編集 ]

-----------------------------------------------------------------
[ ➕ この配送ケースにルールを追加 ]
=================================================================
```

---

## 2.3 主要 UI 要素の仕様

### ■ 配送ケースカード

| 項目               | 説明                                       |
| ------------------ | ------------------------------------------ |
| タイトル           | Shipping Rate 名（例：Japan / Standard）   |
| ラベル             | 国内・海外など視覚的なサブタイトル（任意） |
| 基本設定ブロック   | “全商品ルール”を強調表示                   |
| 商品別ルールリスト | 箇条書き（複数許可）                       |
| 追加ボタン         | 選択中の配送ケースに紐づくルールを追加     |

---

### ■ 基本設定（全商品）

```
◉ 基本設定（全商品）
  出荷日数：◯日
  状態：有効 / 無効
  [ 編集 ] [ 切替 ]
```

- 常に最上部に配置
- 商品別ルールより優先順位が低いが、ユーザーにとって基準点として重要なため可視性重視

---

### ■ 商品別ルール

```
- 商品：◯◯◯
  出荷日数：◯日
  状態：有効
  [ 編集 ]
```

- 説明文の長い商品名にも耐えるレイアウト
- 横並びではなく縦並びで情報が落ち着く

---

# **3. ルール作成モーダル（Create Rule Modal）**

```
+---------------------------------------------------------------+
| ➕ 出荷ルールを追加                                             |
+---------------------------------------------------------------+

配送ケース
  [ ▼ Japan / Standard ]   ← 一つだけ選択

対象
  (●) 全商品（基本設定）
  (○) 商品を指定する
      [ 商品検索バー (Autocomplete) ]

出荷リードタイム（日数）
  [   3   ] 日前

状態
  (●) 有効        (○) 無効

---------------------------------------------------------------
[ キャンセル ]                                 [ 保存する ]
```

---

## 3.1 設計ポイント

- 配送ケースは 1 つのみ選択（複数紐づけはしない）
- 商品検索は Polaris Autocomplete を想定
- 「全商品」の場合は商品選択 UI を非活性化

---

# **4. 休業日カレンダー（Holiday Calendar）**

```
+---------------------------------------------------------------+
| 🗓 休業日カレンダー                                             |
+---------------------------------------------------------------+

【 単発休業日の設定 】
  < カレンダー日付をクリックで ON/OFF >

   Su  Mo  Tu  We  Th  Fr  Sa
   ----------------------------------
    1   2   3   4   5   6   7
    8   9  10  11  12  13  14
   15  16  17  18  19  20  21
   22  23  24  25  26  27  28
   29  30  31

（🔴＝休業日）


【 毎週休業 】
  [▢] 日曜
  [▢] 月曜
  [▢] 火曜
  [▢] 水曜
  [▢] 木曜
  [▢] 金曜
  [▢] 土曜

---------------------------------------------------------------
[ 保存する ]
```

---

# **5. エラー一覧画面（Error List）**

```
+---------------------------------------------------------------+
| ⚠️ 出荷期限エラー一覧                                            |
+---------------------------------------------------------------+

---------------------------------------------------------------------------
| 注文番号 | お届け希望日 | 配送ケース              | エラー理由 | 対応 | … |
---------------------------------------------------------------------------
| #1023   | 2025-12-01   | Intl / ePacket         | 日付取得失敗 |再計算|
---------------------------------------------------------------------------
| #1024   | 2025-12-05   | Japan / Standard       | ルール未設定 |再計算|
---------------------------------------------------------------------------
| #1028   | 2025-12-08   | Intl / Courier (EU)    | APIエラー   |再計算|
---------------------------------------------------------------------------

タブ：
[ すべて ] [ 未解決 ] [ 解決済み ]
```

---

# **6. 画面遷移図（簡易）**

```
出荷ルール一覧
   │
   ├─ ルール追加 → ルール作成モーダル
   │
   ├─ 編集 → ルール編集モーダル
   │
   ├─ 配送ケース同期（バックエンド）
   │
   ├─ エラー一覧
   │
   └─ 休業日カレンダー
```

---

# **7. 実装チーム向けメモ**

- UI は Polaris を前提とした React Component 構成
- “配送ケースごとにまとめる”ため、DB クエリは shipping_rate_id ごとにグルーピング
- モーダルは Remix の `fetcher` を用いると UX がよい
- 商品検索は `/products?query=…` のエンドポイントで対応
- デザインレビュー基準
  - 配送ケースが視覚的に区切られていること
  - 基本設定が常に上に表示されていること
  - 商品別ルールが複数増えても崩れないこと
